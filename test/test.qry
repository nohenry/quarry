

let main = (int8 argc) int8 {
    [int8: 7] a = [1, 2, 3, 4, 5, 6, 7]
    [int8] b = a.&
    test_array_double([1, 2, 3, 4])
    test_slice_double([1, 2, 3, 4].&)
    b[0]
}

let test_array_double = ([int8: 4] val) int8 { val[2] * 2 }
let test_slice_double = ([int8] val) int8 { val[2] * 2 }

let test_array1 = (int8 value) int8 {
    [int8: 4] totest = [1, 2, value, 4]
    test_array_double(totest)
}

let test_slice1 = (int8 value) int8 {
    [int8: 4] totest = [1, 2, value, 4]
    test_slice_double(totest.&)
}

let test_slice2 = (int8 value) int8 {
    [int8] totest = [1, 2, value, 4].&
    test_slice_double(totest)
}

let test_array3 = (int8 value) int8 {
    test_array_double([1, 2, value, 4])
}

let test_slice3 = (int8 value) int8 {
    test_slice_double([1, 2, value, 4].&)
}
